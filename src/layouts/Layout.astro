---
import '../styles/global.css';

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Продажа и сервис вилочных погрузчиков в Астане, Караганде и по Казахстану." } = Astro.props;
---

<!doctype html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<meta name="description" content={description} />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />

		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-VPQVBHG3D5"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-VPQVBHG3D5');
        </script>

        <!-- Google Ads Conversion Tracking Helper -->
        <script is:inline>
          // Функция от Google для задержки перехода по ссылке, пока не отправится событие
          function gtagSendEvent(url) {
            var callback = function () {
              if (typeof url === 'string') {
                window.location = url;
              }
            };
            gtag('event', 'ads_conversion___1', {
              'event_callback': callback,
              'event_timeout': 2000,
              // <event_parameters>
            });
            return false;
          }
        </script>

	</head>
	<body class="font-inter text-gray-900 bg-gray-50 flex flex-col min-h-screen">
		
		<!-- Header -->
		<header class="bg-white shadow-md sticky top-0 z-50">
			<div class="container mx-auto px-4 py-3 md:py-4 flex flex-col md:flex-row justify-between items-center gap-4">
				
				<!-- Logo & City -->
				<div class="flex items-center gap-4 w-full md:w-auto justify-between md:justify-start">
					<a href="/" class="text-2xl font-black text-indigo-800 tracking-tighter uppercase">
						Forklift<span class="text-blue-600">Service</span>
					</a>
					<div class="hidden md:block h-8 w-px bg-gray-300"></div>
					<div class="text-sm text-gray-600 hidden md:block">
						<span class="block font-bold text-gray-800">Астана / Караганда</span>
						Работаем по всему KZ
					</div>
				</div>

				<!-- Navigation (Desktop) -->
				<nav class="hidden md:flex gap-6 font-medium text-gray-700">
					<a href="/" class="hover:text-indigo-700 transition">Каталог техники</a>
					<a href="/repair" class="hover:text-indigo-700 transition">Ремонт и Сервис</a>
					<a href="/tires" class="hover:text-indigo-700 transition">Перепрессовка</a>
				</nav>

				<!-- Contacts & CTA -->
				<div class="flex items-center gap-4 w-full md:w-auto justify-between md:justify-end">
					<div class="text-right">
						<a href="tel:+77017230470" class="block text-lg md:text-xl font-bold text-gray-900 hover:text-indigo-700 transition">
							+7 (701) 723-04-70
						</a>
						<span class="text-xs text-green-600 font-medium block">Сейчас работаем</span>
					</div>
					<a href="https://wa.me/77017230470" class="bg-green-600 hover:bg-green-700 text-white text-sm font-bold py-2 px-4 rounded-lg shadow-lg transition transform hover:scale-105">
						WhatsApp
					</a>
				</div>
			</div>
			
			<!-- Mobile Nav -->
			<div class="md:hidden border-t border-gray-100 flex justify-around py-2 bg-gray-50 text-sm font-medium text-gray-600">
				<a href="/" class="p-2 hover:text-indigo-700">Каталог</a>
				<a href="/repair" class="p-2 hover:text-indigo-700">Ремонт</a>
				<a href="/tires" class="p-2 hover:text-indigo-700">Шины</a>
			</div>
		</header>

		<!-- Main Content -->
		<main class="flex-grow">
			<slot />
		</main>

		<!-- Footer -->
		<footer class="bg-gray-900 text-white py-12">
			<div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
				<div>
					<div class="text-2xl font-black mb-4">Forklift<span class="text-blue-500">Service</span></div>
					<p class="text-gray-400 mb-4">Продажа, аренда и ремонт вилочных погрузчиков. Запчасти и сервисное обслуживание по всему Казахстану.</p>
					
                    <!-- Legal Info for Google Ads Verification -->
                    <div class="text-xs text-gray-500 border-t border-gray-800 pt-4 mt-4 space-y-1">
                        <p class="font-bold text-gray-400">Владелец сайта: ИП Бублик Николай Витальевич</p>
                        <p>Адрес: 100009, Казахстан, г. Караганда, ул. Ермекова 120/2</p>
                        <p>ИИН: <span class="text-red-500">[УКАЖИТЕ ВАШ ИИН]</span></p>
                        <p>Контакты: +7 (701) 723-04-70</p>
                    </div>
				</div>
				<div>
					<h3 class="text-lg font-bold mb-4 text-gray-200">Услуги</h3>
					<ul class="space-y-2 text-gray-400">
						<li><a href="/" class="hover:text-white transition">Продажа погрузчиков</a></li>
						<li><a href="/repair" class="hover:text-white transition">Ремонт и ТО</a></li>
						<li><a href="/tires" class="hover:text-white transition">Перепрессовка шин</a></li>
						<li><a href="#" class="hover:text-white transition">Запчасти</a></li>
					</ul>
				</div>
				<div>
					<h3 class="text-lg font-bold mb-4 text-gray-200">Контакты</h3>
					<a href="tel:+77017230470" class="block text-2xl font-bold mb-2 hover:text-blue-400 transition">+7 (701) 723-04-70</a>
					<p class="text-gray-400 mb-4">Астана / Караганда</p>
					<div class="flex justify-center md:justify-start gap-4">
						<a href="https://wa.me/77017230470" class="text-green-500 hover:text-green-400 font-bold">WhatsApp</a>
						<a href="https://t.me/+77017230470" class="text-blue-500 hover:text-blue-400 font-bold">Telegram</a>
					</div>
				</div>
			</div>
		</footer>

        <!-- Auto-attach conversion tracking to Phone and WhatsApp links -->
        <script is:inline>
            document.addEventListener('DOMContentLoaded', () => {
                // Находим все ссылки с телефоном (tel:) и WhatsApp (wa.me)
                const conversionLinks = document.querySelectorAll('a[href^="tel:"], a[href*="wa.me"], a[href*="whatsapp"]');
                
                conversionLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        // Предотвращаем стандартный переход, чтобы успел сработать трекер
                        e.preventDefault();
                        // Вызываем функцию Google Ads
                        gtagSendEvent(link.href);
                    });
                });
            });
        </script>

	</body>
</html>

<style>
	/* Custom scrollbar for better look */
	::-webkit-scrollbar {
		width: 10px;
	}
	::-webkit-scrollbar-track {
		background: #f1f1f1;
	}
	::-webkit-scrollbar-thumb {
		background: #888;
		border-radius: 5px;
	}
	::-webkit-scrollbar-thumb:hover {
		background: #555;
	}
</style>